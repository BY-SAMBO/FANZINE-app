<!DOCTYPE html>
<html lang="es" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FANZINE - Navegador de Prototipos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script>
    tailwind.config = {
      theme: { extend: { colors: { brand: '#DC2626', chick: '#FDE047', sky: '#7DD3FC', purple: '#A855F7' } } }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .style-btn.active { background: #DC2626; color: white; border-color: #DC2626; }
    .page-btn.active { background: #111; color: white; border-color: #111; }
    .section-btn.active { background: #A855F7; color: white; border-color: #A855F7; }
    iframe { border: none; width: 100%; height: 100%; }
    .thumb { transition: all 0.2s; }
    .thumb:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
    .thumb.active { ring: 3px solid #DC2626; }
  </style>
</head>
<body class="h-full bg-gray-950 text-white overflow-hidden">

  <!-- Top Bar -->
  <header class="bg-gray-900 border-b border-white/10 px-4 py-3 flex items-center justify-between gap-4 shrink-0">
    <div class="flex items-center gap-3">
      <div class="w-8 h-8 bg-brand rounded-lg flex items-center justify-center"><span class="font-extrabold text-sm text-white">F</span></div>
      <div>
        <h1 class="font-bold text-sm">FANZINE Prototipos</h1>
        <p class="text-[10px] text-gray-500">Navegador de estilos UI</p>
      </div>
    </div>

    <!-- Section selector (Admin vs POS) -->
    <div class="flex gap-1.5" id="sectionTabs">
      <button onclick="setSection('admin')" data-section="admin" class="section-btn px-3 py-1.5 rounded-lg text-xs font-semibold border border-white/10 transition-all hover:border-purple">
        Admin
      </button>
      <button onclick="setSection('pos')" data-section="pos" class="section-btn active px-3 py-1.5 rounded-lg text-xs font-semibold border border-white/10 transition-all hover:border-purple">
        POS Cliente
      </button>
    </div>

    <!-- Style selector -->
    <div class="flex gap-1.5" id="styleTabs"></div>

    <!-- Page selector -->
    <div class="flex gap-1.5" id="pageTabs"></div>

    <!-- Actions -->
    <div class="flex items-center gap-2">
      <button onclick="toggleView()" id="viewToggle" class="p-2 rounded-lg border border-white/10 hover:bg-white/5 transition-colors" title="Alternar vista">
        <i data-lucide="columns-2" class="w-4 h-4" id="viewIcon"></i>
      </button>
      <button onclick="openInNewTab()" class="p-2 rounded-lg border border-white/10 hover:bg-white/5 transition-colors" title="Abrir en nueva pestaÃ±a">
        <i data-lucide="external-link" class="w-4 h-4"></i>
      </button>
    </div>
  </header>

  <!-- Main content area -->
  <div class="flex-1 flex flex-col" style="height: calc(100vh - 56px);">

    <!-- Single view -->
    <div id="singleView" class="flex-1 relative">
      <iframe id="mainFrame" src="pos-diner-marquee/cliente.html"></iframe>
      <!-- Info overlay -->
      <div class="absolute bottom-4 left-4 bg-gray-900/90 backdrop-blur-sm rounded-lg px-3 py-2 border border-white/10 text-xs flex items-center gap-3">
        <span id="currentLabel" class="font-semibold text-brand">Diner Marquee</span>
        <span class="text-gray-500">|</span>
        <span id="currentPage" class="text-gray-300">Cliente</span>
        <span class="text-gray-500">|</span>
        <span class="text-gray-500">Flechas <kbd class="px-1 py-0.5 bg-white/10 rounded text-[10px] font-mono">&larr;</kbd> <kbd class="px-1 py-0.5 bg-white/10 rounded text-[10px] font-mono">&rarr;</kbd> para cambiar estilo</span>
      </div>
    </div>

    <!-- Compare view (side by side) -->
    <div id="compareView" class="flex-1 hidden">
      <div class="flex h-full gap-px bg-gray-800 flex-wrap" id="compareGrid"></div>
    </div>

  </div>

<script>
  lucide.createIcons();

  // Config for each section
  const sections = {
    admin: {
      styles: ['neobrutalista', 'retro-minimal', 'pixel-outline'],
      pages: ['productos-lista', 'producto-detalle', 'producto-detalle-v2'],
      styleLabels: { 'neobrutalista': 'Neobrutalista', 'retro-minimal': 'Retro Minimal', 'pixel-outline': 'Pixel Outline' },
      pageLabels: { 'productos-lista': 'Lista Productos', 'producto-detalle': 'Detalle Cards', 'producto-detalle-v2': 'Detalle Tabla' },
      getUrl: (style, page) => `${style}/${page}.html`,
    },
    pos: {
      styles: ['pos-diner-marquee', 'pos-diner-classic', 'pos-marquee-clean', 'pos-marquee-bold', 'pos-minimal-pop', 'pos-fiesta', 'pos-cinema-marquee', 'pos-cinema-vhs'],
      pages: ['cliente'],
      styleLabels: {
        'pos-diner-marquee': 'Diner Marquee',
        'pos-diner-classic': 'Diner Classic',
        'pos-marquee-clean': 'Marquee Clean',
        'pos-marquee-bold': 'Marquee Bold',
        'pos-minimal-pop': 'Minimal Pop',
        'pos-fiesta': 'Fiesta',
        'pos-cinema-marquee': 'Cinema Marquee',
        'pos-cinema-vhs': 'Cinema VHS',
      },
      pageLabels: { 'cliente': 'Cliente' },
      getUrl: (style, page) => `${style}/${page}.html`,
    },
  };

  let currentSection = 'pos';
  let currentStyle = 'pos-diner-marquee';
  let currentPage = 'cliente';
  let isCompareMode = false;

  function setSection(section) {
    currentSection = section;
    const cfg = sections[section];
    currentStyle = cfg.styles[0];
    currentPage = cfg.pages[0];
    renderTabs();
    updateFrame();
  }

  function renderTabs() {
    const cfg = sections[currentSection];

    // Section tabs
    document.querySelectorAll('.section-btn').forEach(b => {
      b.classList.toggle('active', b.dataset.section === currentSection);
    });

    // Style tabs
    const styleTabs = document.getElementById('styleTabs');
    styleTabs.innerHTML = cfg.styles.map(s =>
      `<button onclick="setStyle('${s}')" data-style="${s}" class="style-btn ${s === currentStyle ? 'active' : ''} px-3 py-1.5 rounded-lg text-xs font-semibold border border-white/10 transition-all hover:border-brand">${cfg.styleLabels[s]}</button>`
    ).join('');

    // Page tabs (hide if only one page)
    const pageTabs = document.getElementById('pageTabs');
    if (cfg.pages.length <= 1) {
      pageTabs.innerHTML = '';
    } else {
      pageTabs.innerHTML = cfg.pages.map(p =>
        `<button onclick="setPage('${p}')" data-page="${p}" class="page-btn ${p === currentPage ? 'active' : ''} px-3 py-1.5 rounded-lg text-xs font-medium border border-white/10 transition-all hover:border-white/40">${cfg.pageLabels[p]}</button>`
      ).join('');
    }

    // Compare labels
    cfg.styles.forEach((s, i) => {
      const el = document.getElementById('compareLabel' + (i + 1));
      if (el) el.textContent = cfg.styleLabels[s];
    });

    // Info overlay
    document.getElementById('currentLabel').textContent = cfg.styleLabels[currentStyle];
    document.getElementById('currentPage').textContent = cfg.pageLabels[currentPage];
  }

  function setStyle(style) {
    currentStyle = style;
    renderTabs();
    updateFrame();
  }

  function setPage(page) {
    currentPage = page;
    renderTabs();
    updateFrame();
  }

  function updateFrame() {
    const cfg = sections[currentSection];
    if (isCompareMode) {
      const grid = document.getElementById('compareGrid');
      const colors = ['bg-brand','bg-chick','bg-sky','bg-purple'];
      grid.innerHTML = cfg.styles.map((s, i) =>
        `<div class="flex-1 flex flex-col" style="min-width:25%">
          <div class="bg-gray-900 px-3 py-1.5 flex items-center gap-2 border-b border-white/10 shrink-0">
            <span class="w-2 h-2 rounded-full ${colors[i]||'bg-brand'}"></span>
            <span class="text-xs font-semibold">${cfg.styleLabels[s]}</span>
          </div>
          <iframe src="${cfg.getUrl(s, currentPage)}" class="flex-1" style="border:none;width:100%;height:100%"></iframe>
        </div>`
      ).join('');
    } else {
      document.getElementById('mainFrame').src = cfg.getUrl(currentStyle, currentPage);
    }
  }

  function toggleView() {
    isCompareMode = !isCompareMode;
    document.getElementById('singleView').classList.toggle('hidden', isCompareMode);
    document.getElementById('compareView').classList.toggle('hidden', !isCompareMode);
    const iconEl = document.getElementById('viewIcon');
    iconEl.setAttribute('data-lucide', isCompareMode ? 'maximize-2' : 'columns-2');
    lucide.createIcons();
    document.getElementById('styleTabs').style.opacity = isCompareMode ? '0.3' : '1';
    document.getElementById('styleTabs').style.pointerEvents = isCompareMode ? 'none' : 'auto';
    updateFrame();
  }

  function openInNewTab() {
    const cfg = sections[currentSection];
    window.open(cfg.getUrl(currentStyle, currentPage), '_blank');
  }

  // Keyboard navigation
  document.addEventListener('keydown', (e) => {
    const cfg = sections[currentSection];
    if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
      e.preventDefault();
      const idx = cfg.styles.indexOf(currentStyle);
      if (e.key === 'ArrowRight') {
        setStyle(cfg.styles[(idx + 1) % cfg.styles.length]);
      } else {
        setStyle(cfg.styles[(idx - 1 + cfg.styles.length) % cfg.styles.length]);
      }
    }
    if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
      e.preventDefault();
      const idx = cfg.pages.indexOf(currentPage);
      if (e.key === 'ArrowDown') {
        setPage(cfg.pages[(idx + 1) % cfg.pages.length]);
      } else {
        setPage(cfg.pages[(idx - 1 + cfg.pages.length) % cfg.pages.length]);
      }
    }
    if (e.key === 'c' || e.key === 'C') {
      toggleView();
    }
    if (e.key === 'Tab') {
      e.preventDefault();
      const secs = Object.keys(sections);
      const idx = secs.indexOf(currentSection);
      setSection(secs[(idx + 1) % secs.length]);
    }
  });

  // Init
  renderTabs();
  updateFrame();
</script>
</body>
</html>
